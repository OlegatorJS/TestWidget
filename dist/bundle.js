(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Viewtracker=require("./viewtracker"),util=require("./util"),Datepicker=function(e){this.element=document.querySelector(e),this.today=new Date,this.today.setHours(0,0,0,0),this.prevState="",this.view=new Viewtracker(this.today.getMonth(),this.today.getFullYear()),this.mode=0,this.selected=void 0,this.element.addEventListener("focus",this.hide.bind(this),!1),this.element.addEventListener("input",this.parse.bind(this),!1);var t=document.createElement("div");document.getElementById("range").onchange=function(){targetValue=this.value,console.log(targetValue)},t.innerHTML=util.template,this.calendar=t.firstChild,document.body.appendChild(this.calendar),this.calendar.addEventListener("click",this.click.bind(this)),window.addEventListener("keydown",this.keydown.bind(this)),t.innerHTML=util.secretTemplate;var i=t.firstChild;this.showbutton=i.querySelector("span.button-show"),this.showbutton.addEventListener("click",this.hideshow.bind(this),!1),util.insertAfter(i,this.element),t.innerHTML=util.suggestionTemplate,i=t.firstChild,util.insertAfter(i,this.showbutton),this.suggestion=i.querySelector("input.suggestion"),this.tips=[],this.tipmode=!1,this.daysview=this.calendar.querySelector("div.daysview"),this.monthsview=this.calendar.querySelector("div.monthsview"),this.yearsview=this.calendar.querySelector("div.yearsview"),this.display=this.calendar.querySelector(".display"),this.calendarbody=this.calendar.querySelector(".calendar"),this.hide(),this.fillDow(),this.fill()};Datepicker.prototype={constructor:Datepicker,parse:function(){var e,t=this.element.value;t=t.split(new RegExp(util.separators.join("|"),"g"));var i=t.length;if(t=t.filter(function(e){return""!=e}),(i-t.length>1||4==i)&&(this.element.value=this.prevState,this.resetsuggestion(),t=this.element.value.split(new RegExp(util.separators.join("|"),"g"))),console.log(t,t.length),0==t.length)return this.prevState="",void(this.suggestion.value="");var s=0;t.length>0&&(util.checkText(t[0])?(this.tips=util.gettips(t[0]),this.tipmode=!0,this.suggestion.value=this.tips[0],s+=1):this.element.value=this.prevState),t.length>1&&(isNaN(t[1])?this.element.value=this.prevState:(e=parseInt(t[1]),1<=e&&e<=util.getDaysInMonth(2015,util.parseMonth(t[0]))?(s+=1,this.suggestion.value="",this.tipmode=!1):this.element.value=this.prevState)),t.length>2&&(isNaN(t[2])?this.element.value=this.prevState:(e=parseInt(t[2]),1<=e&&e<=9999?s+=1:this.element.value=this.prevState)),t.length>3&&(this.element.value=this.prevState),s==t.length&&(this.prevState=this.element.value),t=this.element.value;var h=Date.parse(t);0==isNaN(h)&&(this.selected=new Date(h),this.view.year=this.selected.getFullYear(),this.view.month=this.selected.getMonth(),this.fill())},isOpen:function(){return"block"===this.calendar.style.display},setSelected:function(e,t,i){this.selected=new Date(e,t,i,0,0,0,0),this.resetsuggestion()},keydown:function(e){var t;if(!this.selected&&this.isOpen())return console.log(this.today.getMonth()),this.setSelected(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()),this.set(),void this.fill();if(!this.isOpen()){var i=this.element.value;i=i.split(new RegExp(util.separators.join("|"),"g"));var s=this.element.selectionStart}if(util.varters.indexOf(e.keyCode)>-1&&s<=i[0].length&&i.length>2&&(e.preventDefault(),s<=i[0].length&&(i[0]=String.fromCharCode(e.keyCode),i[1]&&i[1].trim()&&i.splice(1,0,"                     "),this.element.value=i.join(" "),this.tips=util.gettips(i[0]),this.tipmode=!0,this.suggestion.value=this.tips[0],this.element.selectionStart=s,this.element.selectionEnd=s)),e.keyCode>=48&&e.keyCode<=57&&!this.isOpen()&&(e.preventDefault(),i=i.join(" "),s==i.length?i+=String.fromCharCode(e.keyCode):i=util.setCharAt(i,s,String.fromCharCode(e.keyCode)),this.element.value=i,this.parse(),this.element.selectionStart=s+1,this.element.selectionEnd=s+1),39!=e.keyCode&&32!=e.keyCode||this.isOpen()||!this.tipmode||(i.length>3?(i=i.filter(function(e){return""!=e}),i[0]=this.suggestion.value,this.element.value=i.join(" "),this.parse()):(this.element.value=this.suggestion.value+" ",this.tipmode=!1)),(38==e.keyCode||40==e.keyCode)&&!this.isOpen()&&this.tipmode){e.preventDefault(),t=38==e.keyCode?1:-1;var h=this.tips.indexOf(this.suggestion.value)+t;h==this.tips.length&&(h=0),h<0&&(h=this.tips.length-1),this.suggestion.value=this.tips[h]}if(!(38!=e.keyCode&&40!=e.keyCode||this.isOpen()||this.tipmode)){if(e.preventDefault(),i.length<3)return;t=38==e.keyCode?1:-1,s<=i[0].length&&(this.view.changemonth(t),this.setSelected(this.view.year,this.view.month,this.selected.getDate()),this.set(),this.element.selectionStart=s,this.element.selectionEnd=s),s>i[0].length&&s<=i[0].length+1+i[1].length&&(this.setSelected(this.view.year,this.view.month,this.selected.getDate()+t),this.set(),this.element.selectionStart=s,this.element.selectionEnd=s,this.view.year=this.selected.getFullYear(),this.view.month=this.selected.getMonth()),s>i[0].length+1+i[1].length&&(this.view.changeyear(t),this.setSelected(this.view.year,this.view.month,this.selected.getDate()),this.set(),this.element.selectionStart=s,this.element.selectionEnd=s,this.view.year=this.selected.getFullYear(),this.view.month=this.selected.getMonth())}if(this.isOpen()&&[37,38,39,40,32,16].indexOf(e.keyCode)>-1){switch(e.preventDefault(),e.keyCode){case 37:switch(this.mode){case 0:this.setSelected(this.view.year,this.view.month,this.selected.getDate()-1);break;case 1:this.view.changemonth(-1),this.setSelected(this.view.year,this.view.month,this.selected.getDate());break;case 2:this.view.changeyear(-1),this.setSelected(this.view.year,this.view.month,this.selected.getDate())}break;case 38:switch(this.mode){case 0:this.setSelected(this.view.year,this.view.month,this.selected.getDate()-7);break;case 1:this.view.changemonth(-3),this.setSelected(this.view.year,this.view.month,this.selected.getDate());break;case 2:this.view.changeyear(-4),this.setSelected(this.view.year,this.view.month,this.selected.getDate())}break;case 39:switch(this.mode){case 0:this.setSelected(this.view.year,this.view.month,this.selected.getDate()+1);break;case 1:this.view.changemonth(1),this.setSelected(this.view.year,this.view.month,this.selected.getDate());break;case 2:this.view.changeyear(1),this.setSelected(this.view.year,this.view.month,this.selected.getDate())}break;case 40:switch(this.mode){case 0:this.setSelected(this.view.year,this.view.month,this.selected.getDate()+7);break;case 1:this.view.changemonth(3),this.setSelected(this.view.year,this.view.month,this.selected.getDate());break;case 2:this.view.changeyear(4),this.setSelected(this.view.year,this.view.month,this.selected.getDate())}break;case 32:0==this.mode?this.hide():this.changeView(-1);break;case 16:this.changeView(1)}this.view.year=this.selected.getFullYear(),this.view.month=this.selected.getMonth(),this.set(),this.fill()}},set:function(){var e="";e+=util.dates.monthsShort[this.selected.getMonth()]+" ",e+=this.selected.getDate()+" ",e+=this.selected.getFullYear(),this.element.value=e,this.prevState=e},fillDow:function(){for(var e="",t=0;t<7;)e+='<div class="dow">'+util.dates.daysShort[t++].toUpperCase()+"</div>";this.calendar.querySelector("div.calendarhead").innerHTML=e},fillMonths:function(e){for(var t,i="",s=0;s<12;)t="",this.selected&&s==this.selected.getMonth()&&(t=" active"),i+='<div class="month'+t+'">'+util.dates.monthsShort[s++]+"</div>";this.monthsview.innerHTML=i},updateDisplay:function(){var e=this.view.year,t=this.view.month;0==this.mode?this.display.innerHTML=util.dates.months[t]+" "+e:1==this.mode?this.display.innerHTML=e:2==this.mode&&(e=16*Math.floor(e/16),this.display.innerHTML=e+" - "+(e+15))},settoday:function(){this.selected=this.today,this.view.year=this.selected.getFullYear(),this.view.month=this.selected.getMonth(),this.set(),this.fill(),this.hide()},fill:function(){var e=this.view.year,t=this.view.month,i=0;switch(this.selected&&(i=this.selected.valueOf()),this.mode){case 0:this.updateDisplay();var s=new Date(e,t-1,28,0,0,0,0),h=util.getDaysInMonth(s.getFullYear(),s.getMonth());s.setDate(h),s.setDate(h-(s.getDay()+7)%7);var a=new Date(s);a.setDate(a.getDate()+42),a=a.valueOf();for(var n,l,o,r="";s.valueOf()<a;)l=s.getFullYear(),o=s.getMonth(),n="",o<t&&l===e||l<e?n=" old":(o>t&&l===e||l>e)&&(n=" new"),s.valueOf()===this.today.valueOf()&&(n=" now"),s.valueOf()===i&&(n=" active"),r+='<div class="day'+n+'">'+s.getDate()+"</div>",s.setDate(s.getDate()+1);this.calendarbody.innerHTML=r;break;case 1:this.fillMonths(t),this.updateDisplay();break;case 2:r="",e=16*Math.floor(e/16);var d=0;this.selected&&(d=this.selected.getFullYear()),this.updateDisplay();for(var c=-1;c<15;c++)r+='<div class="year'+(d===e?" active":"")+'">'+e+"</div>",e+=1;this.yearsview.innerHTML=r}},hideshow:function(){"block"==this.calendar.style.display?this.hide():this.show()},resetsuggestion:function(){this.suggestion.value="",this.tipmode=!1},show:function(){this.place(),this.parse(),this.calendar.style.display="block",window.addEventListener("resize",this.place.bind(this))},hide:function(){this.calendar.style.display="none"},place:function(){var e=util.calculateOffset(this.element);this.calendar.style.top=e.top+this.element.offsetHeight+3+"px",this.calendar.style.left=e.left+"px"},click:function(e){e.preventDefault(),e.stopPropagation();var t=e.target;switch(t.className){case"inc control":case"dec control":this.view[this.view.modes[this.mode].param].call(this.view,(t.className.indexOf("dec")>-1?-1:1)*this.view.modes[this.mode].step),this.fill();break;case"display":this.changeView(1),this.fill();break;case"day":case"day old":case"day new":case"day now":case"day active":var i=this.view.month;t.className.indexOf("old")>-1&&(i-=1,this.view.changemonth(-1)),t.className.indexOf("new")>-1&&(i+=1,this.view.changemonth(1));var s=parseInt(t.innerHTML,10);this.setSelected(this.view.year,i,s),this.set(),this.fill(),this.hide();break;case"month":case"month active":this.view.month=util.dates.monthsShort.indexOf(t.innerHTML),this.changeView(-1),this.fill();break;case"year":case"year active":this.view.year=parseInt(t.innerHTML,10),this.changeView(-1),this.updateDisplay();break;case"today":this.settoday()}},changeView:function(e){this.mode>=2&&1==e||(this.mode+=e,0==this.mode?(this.monthsview.style.display="none",this.daysview.style.display="block"):1==this.mode?(this.daysview.style.display="none",this.yearsview.style.display="none",this.monthsview.style.display="block"):2==this.mode&&(this.monthsview.style.display="none",this.yearsview.style.display="block"))}},window.Datepicker=Datepicker;

},{"./util":2,"./viewtracker":3}],2:[function(require,module,exports){
var util={dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthslow:["january","february","march","april","may","june","july","august","september","october","november","december"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},separators:[" ",",","-","\\.","/",":"],letters:[70,65,68,83,79,78,74],parseMonth:function(e){return isNaN(e)?util.dates.monthslow.indexOf(e.toLowerCase()):e-1},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,a){return[31,util.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][a]},calculateOffset:function(e){var a=0,t=0;do{a+=e.offsetTop||0,t+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:a,left:t}},setCharAt:function(e,a,t){return a>e.length-1?e:e.substr(0,a)+t+e.substr(a+1)},checkText:function(e){for(var a=0;a<12;a++)if(0==util.dates.monthslow[a].indexOf(e.toLowerCase())||e==(a+1).toString())return!0;return!1},gettips:function(e){var a,t=[];a=e[0]==e[0].toUpperCase()?util.dates.months:util.dates.monthslow;for(var s=0;s<12;s++)0==util.dates.monthslow[s].indexOf(e.toLowerCase())&&t.push(a[s]);return t},insertAfter:function(e,a){a.parentNode.insertBefore(e,a.nextSibling)},template:'<div class="datepickerbody"><div class="head"><div class="dec control"><i class="fas fa-angle-left"></i></div><div class="display"></div><div class="inc control"><i class="fas fa-angle-right"></i></div></div><div class="body"><div class="daysview"><div class="calendarhead"></div><div class="calendar"></div></div><div class="monthsview"></div><div class="yearsview"></div></div><div class="today">Today</div></div>',secretTemplate:'<span><span class="button-show"><i class="far fa-calendar-alt"></i></span></span>',suggestionTemplate:'<div><input class="suggestion" disabled type="text"></div>'};module.exports=util;

},{}],3:[function(require,module,exports){
var Viewtracker=function(t,h){this.month=t,this.year=h,this.changemonth=function(t){this.month+=t,12==this.month&&(this.month=0,this.year+=1),-1==this.month&&(this.month=11,this.year-=1)},this.changeyear=function(t){this.year+=t},this.modes=[{param:"changemonth",step:1},{param:"changeyear",step:1},{param:"changeyear",step:16}]};module.exports=Viewtracker;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxkYXRlcGlja2VyLmpzIiwic3JjXFxqc1xcdXRpbC5qcyIsInNyY1xcanNcXHZpZXd0cmFja2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsR0FBSSxhQUFjLFFBQVEsaUJBQ3RCLEtBQU8sUUFBUSxVQUVmLFdBQWEsU0FBUyxHQUN0QixLQUFLLFFBQVUsU0FBUyxjQUFjLEdBRXRDLEtBQUssTUFBUSxHQUFJLE1BQ2pCLEtBQUssTUFBTSxTQUFTLEVBQUUsRUFBRSxFQUFFLEdBRTFCLEtBQUssVUFBWSxHQUVqQixLQUFLLEtBQU8sR0FBSSxhQUFZLEtBQUssTUFBTSxXQUFZLEtBQUssTUFBTSxlQUU5RCxLQUFLLEtBQU8sRUFDWixLQUFLLGFBQVcsR0FDaEIsS0FBSyxRQUFRLGlCQUFpQixRQUFTLEtBQUssS0FBSyxLQUFLLE9BQU8sR0FDN0QsS0FBSyxRQUFRLGlCQUFpQixRQUFTLEtBQUssTUFBTSxLQUFLLE9BQU8sRUFFOUQsSUFBSSxHQUFPLFNBQVMsY0FBYyxNQUVsQyxVQUFTLGVBQWUsU0FBUyxTQUFXLFdBQWEsWUFBYyxLQUFLLE1BQzVFLFFBQVEsSUFBSSxjQUlaLEVBQUssVUFBWSxLQUFLLFNBQ3RCLEtBQUssU0FBVyxFQUFLLFdBQ3JCLFNBQVMsS0FBSyxZQUFZLEtBQUssVUFDL0IsS0FBSyxTQUFTLGlCQUFpQixRQUFTLEtBQUssTUFBTSxLQUFLLE9BQ3hELE9BQU8saUJBQWlCLFVBQVcsS0FBSyxRQUFRLEtBQUssT0FFckQsRUFBSyxVQUFZLEtBQUssY0FDdEIsSUFBSSxHQUFhLEVBQUssVUFDdEIsTUFBSyxXQUFhLEVBQVcsY0FBYyxvQkFDM0MsS0FBSyxXQUFXLGlCQUFpQixRQUFTLEtBQUssU0FBUyxLQUFLLE9BQU8sR0FDcEUsS0FBSyxZQUFZLEVBQVksS0FBSyxTQUVsQyxFQUFLLFVBQVksS0FBSyxtQkFDdEIsRUFBYSxF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InNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIFZpZXd0cmFja2VyID0gcmVxdWlyZSgnLi92aWV3dHJhY2tlcicpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKVxuXG52YXIgRGF0ZXBpY2tlciA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgXG4gICAgdGhpcy50b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy50b2RheS5zZXRIb3VycygwLDAsMCwwKTtcblxuICAgIHRoaXMucHJldlN0YXRlID0gXCJcIjtcblxuICAgIHRoaXMudmlldyA9IG5ldyBWaWV3dHJhY2tlcih0aGlzLnRvZGF5LmdldE1vbnRoKCksIHRoaXMudG9kYXkuZ2V0RnVsbFllYXIoKSk7XG5cbiAgICB0aGlzLm1vZGUgPSAwOyAgICAgICAgICAgICAgLy8wLWRheXMsIDEtbW9udGgsIDIteWVhcnNcbiAgICB0aGlzLnNlbGVjdGVkID0gdW5kZWZpbmVkOyAgLy9iZWNhdXNlIHdoeSBub3RcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLmhpZGUuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMucGFyc2UuYmluZCh0aGlzKSwgZmFsc2UpO1xuXG4gICAgdmFyIHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2VcIikub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsgdGFyZ2V0VmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgIGNvbnNvbGUubG9nKHRhcmdldFZhbHVlKTtcbiAgICBcbiAgICB9XG5cbiAgICB3cmFwLmlubmVySFRNTCA9IHV0aWwudGVtcGxhdGU7XG4gICAgdGhpcy5jYWxlbmRhciA9IHdyYXAuZmlyc3RDaGlsZDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY2FsZW5kYXIpO1xuICAgIHRoaXMuY2FsZW5kYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrLmJpbmQodGhpcykpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duLmJpbmQodGhpcykpO1xuXG4gICAgd3JhcC5pbm5lckhUTUwgPSB1dGlsLnNlY3JldFRlbXBsYXRlO1xuICAgIHZhciBidXR0b253cmFwID0gd3JhcC5maXJzdENoaWxkO1xuICAgIHRoaXMuc2hvd2J1dHRvbiA9IGJ1dHRvbndyYXAucXVlcnlTZWxlY3Rvcignc3Bhbi5idXR0b24tc2hvdycpO1xuICAgIHRoaXMuc2hvd2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZXNob3cuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHV0aWwuaW5zZXJ0QWZ0ZXIoYnV0dG9ud3JhcCwgdGhpcy5lbGVtZW50KTtcblxuICAgIHdyYXAuaW5uZXJIVE1MID0gdXRpbC5zdWdnZXN0aW9uVGVtcGxhdGU7XG4gICAgYnV0dG9ud3JhcCA9IHdyYXAuZmlyc3RDaGlsZDtcbiAgICB1dGlsLmluc2VydEFmdGVyKGJ1dHRvbndyYXAsIHRoaXMuc2hvd2J1dHRvbik7XG4gICAgdGhpcy5zdWdnZXN0aW9uID0gYnV0dG9ud3JhcC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5zdWdnZXN0aW9uJyk7XG4gICAgdGhpcy50aXBzID0gW107XG4gICAgdGhpcy50aXBtb2RlID0gZmFsc2U7XG5cbiAgICB0aGlzLmRheXN2aWV3ID0gdGhpcy5jYWxlbmRhci5xdWVyeVNlbGVjdG9yKCdkaXYuZGF5c3ZpZXcnKTtcbiAgICB0aGlzLm1vbnRoc3ZpZXcgPSB0aGlzLmNhbGVuZGFyLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5tb250aHN2aWV3Jyk7XG4gICAgdGhpcy55ZWFyc3ZpZXcgPSB0aGlzLmNhbGVuZGFyLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi55ZWFyc3ZpZXcnKTtcbiAgICB0aGlzLmRpc3BsYXkgPSAgdGhpcy5jYWxlbmRhci5xdWVyeVNlbGVjdG9yKCcuZGlzcGxheScpO1xuICAgIHRoaXMuY2FsZW5kYXJib2R5ID0gdGhpcy5jYWxlbmRhci5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXInKTtcblxuICAgIHRoaXMuaGlkZSgpO1xuICAgIHRoaXMuZmlsbERvdygpO1xuICAgIHRoaXMuZmlsbCgpO1xufTtcblxuRGF0ZXBpY2tlci5wcm90b3R5cGUgPSB7XG4gICAgXG4gICAgY29uc3RydWN0b3I6IERhdGVwaWNrZXIsXG5cbiAgICBwYXJzZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLmVsZW1lbnQudmFsdWUsIG51bTtcbiAgICAgICAgdmFsID0gdmFsLnNwbGl0KG5ldyBSZWdFeHAodXRpbC5zZXBhcmF0b3JzLmpvaW4oJ3wnKSwgJ2cnKSk7XG4gICAgICAgIHZhciB0ZW1wbGVuID0gdmFsLmxlbmd0aDtcblxuICAgICAgICB2YWwgPSB2YWwuZmlsdGVyKGZ1bmN0aW9uKG4peyByZXR1cm4gbiAhPSBcIlwiIH0pO1xuXG4gICAgICAgIGlmKCh0ZW1wbGVuIC0gdmFsLmxlbmd0aCkgPiAxIHx8IHRlbXBsZW49PTQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHRoaXMucHJldlN0YXRlO1xuICAgICAgICAgICAgdGhpcy5yZXNldHN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgIHZhbCA9IHRoaXMuZWxlbWVudC52YWx1ZS5zcGxpdChuZXcgUmVnRXhwKHV0aWwuc2VwYXJhdG9ycy5qb2luKCd8JyksICdnJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2codmFsLCB2YWwubGVuZ3RoKTtcblxuICAgICAgICBpZih2YWwubGVuZ3RoPT0wKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZTdGF0ZSA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb24udmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICBpZih2YWwubGVuZ3RoPjApIHtcbiAgICAgICAgICAgIGlmICh1dGlsLmNoZWNrVGV4dCh2YWxbMF0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aXBzID0gdXRpbC5nZXR0aXBzKHZhbFswXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50aXBtb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb24udmFsdWUgPSB0aGlzLnRpcHNbMF07XG4gICAgICAgICAgICAgICAgY291bnQrPTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHRoaXMucHJldlN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYodmFsLmxlbmd0aD4xKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4odmFsWzFdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHRoaXMucHJldlN0YXRlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBudW0gPSBwYXJzZUludCh2YWxbMV0pO1xuICAgICAgICAgICAgICAgIGlmICgxIDw9IG51bSAmJiBudW0gPD0gdXRpbC5nZXREYXlzSW5Nb250aCgyMDE1LCB1dGlsLnBhcnNlTW9udGgodmFsWzBdKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQrPTE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbi52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlwbW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHRoaXMucHJldlN0YXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHZhbC5sZW5ndGg+Mikge1xuXG4gICAgICAgICAgICBpZihpc05hTih2YWxbMl0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdGhpcy5wcmV2U3RhdGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG51bSA9IHBhcnNlSW50KHZhbFsyXSk7XG4gICAgICAgICAgICAgICAgaWYoIDEgPD0gbnVtICYmIG51bSA8PSA5OTk5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kz0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHRoaXMucHJldlN0YXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYodmFsLmxlbmd0aD4zKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB0aGlzLnByZXZTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvdW50PT12YWwubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZTdGF0ZSA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbCA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgdmFyIGRhdGUgPSBEYXRlLnBhcnNlKHZhbCk7XG5cbiAgICAgICAgaWYoaXNOYU4oZGF0ZSk9PWZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnZpZXcueWVhciA9IHRoaXMuc2VsZWN0ZWQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5tb250aCA9IHRoaXMuc2VsZWN0ZWQuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgICB9XG5cbiAgICB9LFxuXG4gICAgaXNPcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhbGVuZGFyLnN0eWxlLmRpc3BsYXk9PT0nYmxvY2snO1xuICAgIH0sXG5cbiAgICBzZXRTZWxlY3RlZDogZnVuY3Rpb24oeWVhciwgbW9udGgsIGRhdGUpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IG5ldyBEYXRlKHllYXIsbW9udGgsZGF0ZSwwLDAsMCwwKTtcbiAgICAgICAgdGhpcy5yZXNldHN1Z2dlc3Rpb24oKTtcbiAgICB9LFxuXG4gICAgXG5cbiAgICBrZXlkb3duOiBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgdmFyIGQ7XG5cbiAgICAgICAgaWYoIXRoaXMuc2VsZWN0ZWQgJiYgdGhpcy5pc09wZW4oKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy50b2RheS5nZXRNb250aCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy50b2RheS5nZXRGdWxsWWVhcigpLHRoaXMudG9kYXkuZ2V0TW9udGgoKSx0aGlzLnRvZGF5LmdldERhdGUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldCgpO1xuICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZighdGhpcy5pc09wZW4oKSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIHZhbCA9IHZhbC5zcGxpdChuZXcgUmVnRXhwKHV0aWwuc2VwYXJhdG9ycy5qb2luKCd8JyksICdnJykpO1xuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHV0aWwudmFydGVycy5pbmRleE9mKGUua2V5Q29kZSk+LTEgJiYgcG9zPD12YWxbMF0ubGVuZ3RoICYmIHZhbC5sZW5ndGg+Mikge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYocG9zPD12YWxbMF0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFsWzBdID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUpO1xuXG4gICAgICAgICAgICAgICAgaWYodmFsWzFdICYmIHZhbFsxXS50cmltKCkpXG4gICAgICAgICAgICAgICAgICAgIHZhbC5zcGxpY2UoMSwgMCwgXCIgICAgICAgICAgICAgICAgICAgICBcIik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB2YWwuam9pbignICcpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy50aXBzID0gdXRpbC5nZXR0aXBzKHZhbFswXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50aXBtb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb24udmFsdWUgPSB0aGlzLnRpcHNbMF07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBwb3M7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IHBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGUua2V5Q29kZSA+PSA0OCAmJiBlLmtleUNvZGUgPD0gNTcgJiYgIXRoaXMuaXNPcGVuKCkpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhbCA9IHZhbC5qb2luKCcgJyk7XG5cbiAgICAgICAgICAgIGlmKHBvcz09dmFsLmxlbmd0aClcbiAgICAgICAgICAgICAgICB2YWwgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHZhbCA9IHV0aWwuc2V0Q2hhckF0KHZhbCxwb3MsU3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUpKTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdmFsO1xuICAgICAgICAgICAgdGhpcy5wYXJzZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBwb3MrMTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSBwb3MrMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKChlLmtleUNvZGU9PTM5IHx8IGUua2V5Q29kZT09MzIpICYmICF0aGlzLmlzT3BlbigpICYmIHRoaXMudGlwbW9kZSkge1xuICAgICAgICAgICAgaWYodmFsLmxlbmd0aD4zKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdmFsLmZpbHRlcihmdW5jdGlvbihuKXsgcmV0dXJuIG4gIT0gXCJcIiB9KTtcbiAgICAgICAgICAgICAgICB2YWxbMF0gPSB0aGlzLnN1Z2dlc3Rpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdmFsLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB0aGlzLnN1Z2dlc3Rpb24udmFsdWUgKyBcIiBcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnRpcG1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKChlLmtleUNvZGU9PTM4IHx8IGUua2V5Q29kZT09NDApICYmICF0aGlzLmlzT3BlbigpICYmIHRoaXMudGlwbW9kZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBkID0gKGUua2V5Q29kZSA9PSAzOCkgPyAxIDogLTE7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnRpcHMuaW5kZXhPZih0aGlzLnN1Z2dlc3Rpb24udmFsdWUpICsgZDtcblxuICAgICAgICAgICAgaWYoaW5kZXggPT0gdGhpcy50aXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy50aXBzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbi52YWx1ZSA9IHRoaXMudGlwc1tpbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICBpZigoZS5rZXlDb2RlPT0zOCB8fCBlLmtleUNvZGU9PTQwKSAmJiAhdGhpcy5pc09wZW4oKSAmJiAhdGhpcy50aXBtb2RlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmKHZhbC5sZW5ndGggPCAzKSByZXR1cm47XG5cbiAgICAgICAgICAgIGQgPSAoZS5rZXlDb2RlID09IDM4KSA/IDEgOiAtMTtcblxuICAgICAgICAgICAgaWYocG9zPD12YWxbMF0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmNoYW5nZW1vbnRoKGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy52aWV3LnllYXIsIHRoaXMudmlldy5tb250aCwgdGhpcy5zZWxlY3RlZC5nZXREYXRlKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gcG9zO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSBwb3M7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHBvcz52YWxbMF0ubGVuZ3RoICYmIHBvczw9KHZhbFswXS5sZW5ndGgrMSt2YWxbMV0ubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy52aWV3LnllYXIsIHRoaXMudmlldy5tb250aCwgdGhpcy5zZWxlY3RlZC5nZXREYXRlKCkgKyBkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IHBvcztcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID0gcG9zO1xuXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnllYXIgPSB0aGlzLnNlbGVjdGVkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3Lm1vbnRoID0gdGhpcy5zZWxlY3RlZC5nZXRNb250aCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihwb3M+KHZhbFswXS5sZW5ndGgrMSt2YWxbMV0ubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5jaGFuZ2V5ZWFyKGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy52aWV3LnllYXIsIHRoaXMudmlldy5tb250aCwgdGhpcy5zZWxlY3RlZC5nZXREYXRlKCkpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBwb3M7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IHBvcztcblxuICAgICAgICAgICAgICAgIHRoaXMudmlldy55ZWFyID0gdGhpcy5zZWxlY3RlZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5tb250aCA9IHRoaXMuc2VsZWN0ZWQuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuaXNPcGVuKCkgJiYgWzM3LDM4LDM5LDQwLDMyLDE2XS5pbmRleE9mKGUua2V5Q29kZSk+LTEpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNoYW5nZW1vbnRoKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuY2hhbmdleWVhcigtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCh0aGlzLnZpZXcueWVhciwgdGhpcy52aWV3Lm1vbnRoLCB0aGlzLnNlbGVjdGVkLmdldERhdGUoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpIC0gNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNoYW5nZW1vbnRoKC0zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuY2hhbmdleWVhcigtNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCh0aGlzLnZpZXcueWVhciwgdGhpcy52aWV3Lm1vbnRoLCB0aGlzLnNlbGVjdGVkLmdldERhdGUoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNoYW5nZW1vbnRoKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy52aWV3LnllYXIsIHRoaXMudmlldy5tb250aCwgdGhpcy5zZWxlY3RlZC5nZXREYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jaGFuZ2V5ZWFyKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy52aWV3LnllYXIsIHRoaXMudmlldy5tb250aCwgdGhpcy5zZWxlY3RlZC5nZXREYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCh0aGlzLnZpZXcueWVhciwgdGhpcy52aWV3Lm1vbnRoLCB0aGlzLnNlbGVjdGVkLmdldERhdGUoKSArIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jaGFuZ2Vtb250aCgzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuY2hhbmdleWVhcig0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHRoaXMudmlldy55ZWFyLCB0aGlzLnZpZXcubW9udGgsIHRoaXMuc2VsZWN0ZWQuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5jaGFuZ2VWaWV3KC0xKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VWaWV3KDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy52aWV3LnllYXIgPSB0aGlzLnNlbGVjdGVkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnZpZXcubW9udGggPSB0aGlzLnNlbGVjdGVkLmdldE1vbnRoKCk7XG4gICAgICAgICAgICB0aGlzLnNldCgpO1xuICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzdHIgPSAnJztcblxuICAgICAgICBzdHIgKz0gdXRpbC5kYXRlcy5tb250aHNTaG9ydFt0aGlzLnNlbGVjdGVkLmdldE1vbnRoKCldICsgXCIgXCI7XG4gICAgICAgIHN0ciArPSB0aGlzLnNlbGVjdGVkLmdldERhdGUoKSArIFwiIFwiO1xuICAgICAgICBzdHIgKz0gdGhpcy5zZWxlY3RlZC5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IHN0cjtcbiAgICAgICAgdGhpcy5wcmV2U3RhdGUgPSBzdHI7XG4gICAgfSxcblxuICAgIGZpbGxEb3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9ICcnLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgNykge1xuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImRvd1wiPicrdXRpbC5kYXRlcy5kYXlzU2hvcnRbKGkrKyldLnRvVXBwZXJDYXNlKCkrJzwvZGl2Pic7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxlbmRhci5xdWVyeVNlbGVjdG9yKCdkaXYuY2FsZW5kYXJoZWFkJykuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9LFxuXG4gICAgZmlsbE1vbnRoczogZnVuY3Rpb24obW9udGgpIHtcbiAgICAgICAgdmFyIGh0bWwgPSAnJyxcbiAgICAgICAgICAgIGNsLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgMTIpIHtcbiAgICAgICAgICAgIGNsID0gJyc7XG4gICAgICAgICAgICBpZih0aGlzLnNlbGVjdGVkICYmIGk9PXRoaXMuc2VsZWN0ZWQuZ2V0TW9udGgoKSkge1xuICAgICAgICAgICAgICAgIGNsID0gJyBhY3RpdmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIm1vbnRoJytjbCsnXCI+Jyt1dGlsLmRhdGVzLm1vbnRoc1Nob3J0WyhpKyspXSsnPC9kaXY+JztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vbnRoc3ZpZXcuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9LFxuXG4gICAgdXBkYXRlRGlzcGxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB5ZWFyID0gdGhpcy52aWV3LnllYXIsXG4gICAgICAgICAgICBtb250aCA9IHRoaXMudmlldy5tb250aDtcblxuICAgICAgICBpZih0aGlzLm1vZGU9PTApXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkuaW5uZXJIVE1MID0gdXRpbC5kYXRlcy5tb250aHNbbW9udGhdICsgXCIgXCIgKyB5ZWFyO1xuICAgICAgICBlbHNlIGlmKHRoaXMubW9kZT09MSlcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheS5pbm5lckhUTUwgPSB5ZWFyO1xuICAgICAgICBlbHNlIGlmKHRoaXMubW9kZT09Mikge1xuICAgICAgICAgICAgeWVhciA9IE1hdGguZmxvb3IoeWVhciAvIDE2KSAqIDE2O1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5LmlubmVySFRNTCA9IHllYXIgKyBcIiAtIFwiICsgKHllYXIgKyAxNSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0dG9kYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy50b2RheTtcbiAgICAgICAgdGhpcy52aWV3LnllYXIgPSB0aGlzLnNlbGVjdGVkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMudmlldy5tb250aCA9IHRoaXMuc2VsZWN0ZWQuZ2V0TW9udGgoKTtcbiAgICAgICAgdGhpcy5zZXQoKTtcbiAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH0sXG5cbiAgICBmaWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHllYXIgPSB0aGlzLnZpZXcueWVhcixcbiAgICAgICAgICAgIG1vbnRoID0gdGhpcy52aWV3Lm1vbnRoLFxuICAgICAgICAgICAgdG9kYXkgPSAwO1xuXG4gICAgICAgICAgICBpZih0aGlzLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdG9kYXkgPSB0aGlzLnNlbGVjdGVkLnZhbHVlT2YoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICBzd2l0Y2godGhpcy5tb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEaXNwbGF5KCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJldk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgtMSwgMjgsIDAsIDAsIDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBkYXkgPSB1dGlsLmdldERheXNJbk1vbnRoKHByZXZNb250aC5nZXRGdWxsWWVhcigpLCBwcmV2TW9udGguZ2V0TW9udGgoKSk7XG4gICAgICAgICAgICAgICAgcHJldk1vbnRoLnNldERhdGUoZGF5KTtcbiAgICAgICAgICAgICAgICBwcmV2TW9udGguc2V0RGF0ZShkYXkgLSAocHJldk1vbnRoLmdldERheSgpICsgNykgJSA3KTtcblxuICAgICAgICAgICAgICAgIHZhciBuZXh0TW9udGggPSBuZXcgRGF0ZShwcmV2TW9udGgpO1xuICAgICAgICAgICAgICAgIG5leHRNb250aC5zZXREYXRlKG5leHRNb250aC5nZXREYXRlKCkgKyA0Mik7XG4gICAgICAgICAgICAgICAgbmV4dE1vbnRoID0gbmV4dE1vbnRoLnZhbHVlT2YoKTtcblxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gXCJcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NuYW1lLFxuICAgICAgICAgICAgICAgICAgICBwcmV2WSxcbiAgICAgICAgICAgICAgICAgICAgcHJldk07XG5cbiAgICAgICAgICAgICAgICB3aGlsZShwcmV2TW9udGgudmFsdWVPZigpIDwgbmV4dE1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZZID0gcHJldk1vbnRoLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZNID0gcHJldk1vbnRoLmdldE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzbmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJldk0gPCBtb250aCAmJiBwcmV2WSA9PT0geWVhcikgfHwgIHByZXZZIDwgeWVhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NuYW1lID0gJyBvbGQnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChwcmV2TSA+IG1vbnRoICYmIHByZXZZID09PSB5ZWFyKSB8fCBwcmV2WSA+IHllYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzbmFtZSA9ICcgbmV3JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldk1vbnRoLnZhbHVlT2YoKSA9PT0gdGhpcy50b2RheS52YWx1ZU9mKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzbmFtZSA9ICcgbm93JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldk1vbnRoLnZhbHVlT2YoKSA9PT0gdG9kYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzbmFtZSA9ICcgYWN0aXZlJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBodG1sKz0nPGRpdiBjbGFzcz1cImRheScrY2xhc3NuYW1lKydcIj4nKyBwcmV2TW9udGguZ2V0RGF0ZSgpICsgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIHByZXZNb250aC5zZXREYXRlKHByZXZNb250aC5nZXREYXRlKCkrMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcmJvZHkuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHRoaXMuZmlsbE1vbnRocyhtb250aCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBodG1sID0gJyc7XG4gICAgICAgICAgICAgICAgeWVhciA9IE1hdGguZmxvb3IoeWVhci8xNikgKiAxNjtcblxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZHllYXIgPSAwO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWR5ZWFyID0gdGhpcy5zZWxlY3RlZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAtMTsgaSA8IDE1OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInllYXInKyggc2VsZWN0ZWR5ZWFyID09PSB5ZWFyID8gJyBhY3RpdmUnIDogJycpKydcIj4nK3llYXIrJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIHllYXIgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc3ZpZXcuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgfSxcblxuICAgIGhpZGVzaG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYodGhpcy5jYWxlbmRhci5zdHlsZS5kaXNwbGF5PT0nYmxvY2snKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfSAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZXNldHN1Z2dlc3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb24udmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnRpcG1vZGUgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucGxhY2UoKTtcbiAgICAgICAgdGhpcy5wYXJzZSgpO1xuICAgICAgICB0aGlzLmNhbGVuZGFyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5wbGFjZS5iaW5kKHRoaXMpKTtcbiAgICB9LFxuXG4gICAgaGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2FsZW5kYXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9LFxuXG4gICAgcGxhY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb2ZmID0gdXRpbC5jYWxjdWxhdGVPZmZzZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5jYWxlbmRhci5zdHlsZS50b3AgPSBvZmYudG9wICsgdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodCArIDMgKyAncHgnO1xuICAgICAgICB0aGlzLmNhbGVuZGFyLnN0eWxlLmxlZnQgPSBvZmYubGVmdCArICdweCc7XG4gICAgfSxcblxuICAgIGNsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICBzd2l0Y2godGFyZ2V0LmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnaW5jIGNvbnRyb2wnOlxuICAgICAgICAgICAgY2FzZSAnZGVjIGNvbnRyb2wnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdbdGhpcy52aWV3Lm1vZGVzW3RoaXMubW9kZV0ucGFyYW1dLmNhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdkZWMnKSA+IC0xID8gLTEgOiAxKSAqIHRoaXMudmlldy5tb2Rlc1t0aGlzLm1vZGVdLnN0ZXBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGlzcGxheSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlVmlldygxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgICAgY2FzZSAnZGF5IG9sZCc6XG4gICAgICAgICAgICBjYXNlICdkYXkgbmV3JzpcbiAgICAgICAgICAgIGNhc2UgJ2RheSBub3cnOlxuICAgICAgICAgICAgY2FzZSAnZGF5IGFjdGl2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJtb250aCA9IHRoaXMudmlldy5tb250aDtcbiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdvbGQnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGN1cm1vbnRoIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jaGFuZ2Vtb250aCgtMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCduZXcnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGN1cm1vbnRoICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jaGFuZ2Vtb250aCgxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5ID0gcGFyc2VJbnQodGFyZ2V0LmlubmVySFRNTCwxMCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQodGhpcy52aWV3LnllYXIsY3VybW9udGgsZGF5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgY2FzZSAnbW9udGggYWN0aXZlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3Lm1vbnRoID0gdXRpbC5kYXRlcy5tb250aHNTaG9ydC5pbmRleE9mKHRhcmdldC5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZpZXcoLTEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgY2FzZSAneWVhciBhY3RpdmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcueWVhciA9IHBhcnNlSW50KHRhcmdldC5pbm5lckhUTUwsMTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZpZXcoLTEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RvZGF5JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0b2RheSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY2hhbmdlVmlldzogZnVuY3Rpb24oaSkge1xuICAgICAgICBpZih0aGlzLm1vZGUgPj0gMiAmJiBpPT0xKSByZXR1cm47XG4gICAgICAgIHRoaXMubW9kZSArPSBpO1xuICAgICAgICBpZih0aGlzLm1vZGU9PTApIHtcbiAgICAgICAgICAgIHRoaXMubW9udGhzdmlldy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy5kYXlzdmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMubW9kZT09MSkge1xuICAgICAgICAgICAgdGhpcy5kYXlzdmlldy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy55ZWFyc3ZpZXcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRoaXMubW9udGhzdmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMubW9kZT09Mil7XG4gICAgICAgICAgICB0aGlzLm1vbnRoc3ZpZXcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRoaXMueWVhcnN2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxufTtcblxud2luZG93LkRhdGVwaWNrZXIgPSBEYXRlcGlja2VyOyIsInZhciB1dGlsID0ge1xuICAgIGRhdGVzOntcbiAgICAgICAgZGF5czogW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIiwgXCJTdW5kYXlcIl0sXG4gICAgICAgIGRheXNTaG9ydDogW1wiU3VcIiwgXCJNb1wiLCBcIlR1XCIsIFwiV2VcIiwgXCJUaFwiLCBcIkZyXCIsIFwiU2FcIiwgXCJTdVwiXSxcbiAgICAgICAgbW9udGhzOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXSxcbiAgICAgICAgbW9udGhzbG93OiBbXCJqYW51YXJ5XCIsIFwiZmVicnVhcnlcIiwgXCJtYXJjaFwiLCBcImFwcmlsXCIsIFwibWF5XCIsIFwianVuZVwiLCBcImp1bHlcIiwgXCJhdWd1c3RcIiwgXCJzZXB0ZW1iZXJcIiwgXCJvY3RvYmVyXCIsIFwibm92ZW1iZXJcIiwgXCJkZWNlbWJlclwiXSxcbiAgICAgICAgbW9udGhzU2hvcnQ6IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXVxuICAgIH0sXG4gICAgc2VwYXJhdG9yczogWycgJywgJywnLCAnLScsICdcXFxcLicsICcvJywgJzonXSxcbiAgICBsZXR0ZXJzOiBbNzAsNjUsNjgsODMsNzksNzgsNzRdLFxuICAgIHBhcnNlTW9udGg6IGZ1bmN0aW9uKG1vbnRoKSB7IFxuICAgICAgaWYoaXNOYU4obW9udGgpKSB7XG4gICAgICAgICAgcmV0dXJuIHV0aWwuZGF0ZXMubW9udGhzbG93LmluZGV4T2YobW9udGgudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtb250aCAtIDE7XG4gICAgICB9XG4gICAgfSxcbiAgICBpc0xlYXBZZWFyOiBmdW5jdGlvbiAoeWVhcikge1xuICAgICAgICByZXR1cm4gKCgoeWVhciAlIDQgPT09IDApICYmICh5ZWFyICUgMTAwICE9PSAwKSkgfHwgKHllYXIgJSA0MDAgPT09IDApKVxuICAgIH0sXG4gICAgZ2V0RGF5c0luTW9udGg6IGZ1bmN0aW9uICh5ZWFyLCBtb250aCkge1xuICAgICAgICByZXR1cm4gWzMxLCAodXRpbC5pc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyOCksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXVttb250aF1cbiAgICB9LFxuICAgIGNhbGN1bGF0ZU9mZnNldDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICB2YXIgdG9wID0gMCwgbGVmdCA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDtcbiAgICAgICAgICAgIGxlZnQgKz0gZWxlbWVudC5vZmZzZXRMZWZ0IHx8IDA7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIH0gd2hpbGUoZWxlbWVudCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcDogdG9wLFxuICAgICAgICAgICAgbGVmdDogbGVmdFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgc2V0Q2hhckF0OiBmdW5jdGlvbihzdHIsIGluZGV4LCBjaHIpIHtcbiAgICAgICAgaWYoaW5kZXggPiBzdHIubGVuZ3RoLTEpIHJldHVybiBzdHI7XG4gICAgICAgIHJldHVybiBzdHIuc3Vic3RyKDAsaW5kZXgpICsgY2hyICsgc3RyLnN1YnN0cihpbmRleCsxKTtcbiAgICB9LFxuICAgIGNoZWNrVGV4dDogZnVuY3Rpb24odGV4dCkge1xuICAgICAgICBmb3IodmFyIGk9MDsgaTwxMjsgaSsrKSB7XG4gICAgICAgICAgICBpZih1dGlsLmRhdGVzLm1vbnRoc2xvd1tpXS5pbmRleE9mKHRleHQudG9Mb3dlckNhc2UoKSkgPT0gMCB8fCB0ZXh0ID09IChpKzEpLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBnZXR0aXBzOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgIHZhciBhcnIgPSBbXSwgbW9udGhzO1xuICAgICAgICBpZih0ZXh0WzBdID09IHRleHRbMF0udG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgbW9udGhzID0gdXRpbC5kYXRlcy5tb250aHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb250aHMgPSB1dGlsLmRhdGVzLm1vbnRoc2xvdztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPDEyOyBpKyspIHtcbiAgICAgICAgICAgIGlmKHV0aWwuZGF0ZXMubW9udGhzbG93W2ldLmluZGV4T2YodGV4dC50b0xvd2VyQ2FzZSgpKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2gobW9udGhzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgaW5zZXJ0QWZ0ZXI6IGZ1bmN0aW9uKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHtcbiAgICAgICAgcmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlLm5leHRTaWJsaW5nKTtcbiAgICB9LFxuICAgIHRlbXBsYXRlOiAgICc8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlcmJvZHlcIj4nK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRcIj4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkZWMgY29udHJvbFwiPjxpIGNsYXNzPVwiZmFzIGZhLWFuZ2xlLWxlZnRcIj48L2k+PC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZGlzcGxheVwiPjwvZGl2PicrXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluYyBjb250cm9sXCI+PGkgY2xhc3M9XCJmYXMgZmEtYW5nbGUtcmlnaHRcIj48L2k+PC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYm9keVwiPicrXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRheXN2aWV3XCI+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNhbGVuZGFyaGVhZFwiPicrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjYWxlbmRhclwiPicrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibW9udGhzdmlld1wiPicrXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwieWVhcnN2aWV3XCI+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0b2RheVwiPlRvZGF5PC9kaXY+JytcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyxcbiAgICBzZWNyZXRUZW1wbGF0ZTogJzxzcGFuPjxzcGFuIGNsYXNzPVwiYnV0dG9uLXNob3dcIj48aSBjbGFzcz1cImZhciBmYS1jYWxlbmRhci1hbHRcIj48L2k+PC9zcGFuPjwvc3Bhbj4nLFxuICAgIHN1Z2dlc3Rpb25UZW1wbGF0ZTogJzxkaXY+PGlucHV0IGNsYXNzPVwic3VnZ2VzdGlvblwiIGRpc2FibGVkIHR5cGU9XCJ0ZXh0XCI+PC9kaXY+J1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB1dGlsOyIsInZhciBWaWV3dHJhY2tlciA9IGZ1bmN0aW9uKG1vbnRoLCB5ZWFyKSB7XG5cbiAgICB0aGlzLm1vbnRoID0gbW9udGg7XG4gICAgdGhpcy55ZWFyID0geWVhcjtcblxuICAgIHRoaXMuY2hhbmdlbW9udGggPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHRoaXMubW9udGgrPWk7XG4gICAgICAgIGlmKHRoaXMubW9udGg9PTEyKSB7XG4gICAgICAgICAgICB0aGlzLm1vbnRoPTA7XG4gICAgICAgICAgICB0aGlzLnllYXIrPTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5tb250aD09LTEpIHtcbiAgICAgICAgICAgIHRoaXMubW9udGg9MTE7XG4gICAgICAgICAgICB0aGlzLnllYXItPTE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5jaGFuZ2V5ZWFyID0gZnVuY3Rpb24oaSkge1xuICAgICAgICB0aGlzLnllYXIrPWk7XG4gICAgfTtcblxuICAgIHRoaXMubW9kZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwicGFyYW1cIjpcImNoYW5nZW1vbnRoXCIsXG4gICAgICAgICAgICBcInN0ZXBcIjoxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwicGFyYW1cIjpcImNoYW5nZXllYXJcIixcbiAgICAgICAgICAgIFwic3RlcFwiOjFcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgXCJwYXJhbVwiOlwiY2hhbmdleWVhclwiLFxuICAgICAgICAgICAgXCJzdGVwXCI6MTZcbiAgICAgICAgfVxuICAgIF1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmlld3RyYWNrZXI7Il19
